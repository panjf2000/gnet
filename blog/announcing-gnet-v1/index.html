<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.54">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="gnet Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="gnet Blog Atom Feed">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu|Roboto|Source+Code+Pro">
<link rel="stylesheet" href="https://at-ui.github.io/feather-font/css/iconfont.css">

<title data-react-helmet="true">Announcing gnet v1.0.0 | gnet</title>

<meta data-react-helmet="true" http-equiv="x-ua-compatible" content="ie=edge"><meta data-react-helmet="true" property="og:title" content="Announcing gnet v1.0.0 | gnet"><meta data-react-helmet="true" name="description" content="Hello World! We present you, gnet!"><meta data-react-helmet="true" property="og:description" content="Hello World! We present you, gnet!"><meta data-react-helmet="true" property="og:image" content="https://gnet.host/img/open-graph.png"><meta data-react-helmet="true" property="twitter:image" content="https://gnet.host/img/open-graph.png"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Announcing gnet v1.0.0 | gnet"><meta data-react-helmet="true" name="twitter:site" content="@vectordotdev"><meta data-react-helmet="true" name="twitter:creator" content="@vectordotdev"><meta data-react-helmet="true" property="og:url" content="https://gnet.host/blog/announcing-gnet-v1/"><meta data-react-helmet="true" name="twitter:card" content="summary">

<link data-react-helmet="true" rel="shortcut icon" href="/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://gnet.host/blog/announcing-gnet-v1/">


<link rel="stylesheet" href="/styles.2ae13ac2.css">


<link rel="preload" href="/styles.6d9afda7.js" as="script">

<link rel="preload" href="/runtime~main.28a1d406.js" as="script">

<link rel="preload" href="/main.f3aa464a.js" as="script">

<link rel="preload" href="/1.55ea5b9e.js" as="script">

<link rel="preload" href="/2.3a298c7e.js" as="script">

<link rel="preload" href="/3.428725dd.js" as="script">

<link rel="preload" href="/ccc49370.fb94a70a.js" as="script">

<link rel="preload" href="/69432dc9.a0c2d53c.js" as="script">

</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script>
<div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top navbarHideable_2ZIa"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"></a><a class="navbar__item navbar__link" activeclassname="navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" activeclassname="navbar__link--active" href="/blog/">Blog</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link navbar__item__icon_only" title="Highlights" activeclassname="navbar__link--active" href="/highlights/"><i class="feather icon-gift"></i> </a><a class="navbar__item navbar__link navbar__item__icon_only" title="Community" activeclassname="navbar__link--active" href="/community/"><i class="feather icon-users"></i> </a><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://github.com/panjf2000/gnet"><i class="feather icon-github"></i> GitHub<span class="badge badge--secondary">6.6k</span></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_16CL"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_34Mc moon_313u"></span></div><div class="react-toggle-track-x"><span class="toggle_34Mc sun_1Og-"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="navbar__item navbar__link" activeclassname="navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a class="navbar__item navbar__link" activeclassname="navbar__link--active" href="/blog/">Blog</a></li><li class="menu__list-item"><a class="navbar__item navbar__link" activeclassname="navbar__link--active" href="/highlights/">Highlights</a></li><li class="menu__list-item"><a class="navbar__item navbar__link" activeclassname="navbar__link--active" href="/community/">Community</a></li><li class="menu__list-item"><a class="navbar__item navbar__link" target="_blank" rel="noopener noreferrer" href="https://github.com/panjf2000/gnet">GitHub<span class="badge badge--secondary">6.6k</span></a></li></ul></div></div></div></nav><div class="main-wrapper"><article class="blogPost_3zD9"><header class="hero domain-bg domain-bg--presentation header_1qzK"><div class="container"><div class="hero--avatar"><div class="avatar avatar--lg avatar--vertical"><img class="avatar__photo avatar__photo--lg" src="https://github.com/panjf2000.png"><div class="avatar__intro"><div class="avatar__name"><a href="https://github.com/panjf2000" target="_blank" rel="author">Andy Pan</a> / <time pubdate="pubdate" datetime="2020-03-13T00:00:00.000Z">Mar 13th</time> / 7 min read</div></div></div></div><h1>Announcing gnet v1.0.0</h1><div class="hero--subtitle">Hello World! We present you, gnet!</div><div class="hero--tags"><span class="tags_3AF9"><a class="badge badge--rounded badge--pink" href="/blog/tags/type-announcement/">type: announcement</a><a class="badge badge--rounded badge--blue" href="/blog/tags/domain-presentation/">domain: presentation</a></span></div></div></header><div class="container container--xs margin-vert--xl"><section class="markdown dropcap"><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="today-we-are-release-gnet-v100-enjoy-this-ultra-fast-framework-of-networking"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#today-we-are-release-gnet-v100-enjoy-this-ultra-fast-framework-of-networking" title="Direct link to heading">#</a>Today, we are release gnet v1.0.0, enjoy this ultra-fast framework of networking!</h2><p align="center"><img src="https://raw.githubusercontent.com/panjf2000/logos/master/gnet/logo.png" alt="gnet"></p><h1><a aria-hidden="true" tabindex="-1" class="anchor" id="-introduction"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#-introduction" title="Direct link to heading">#</a>üìñ Introduction</h1><p><code>gnet</code> is an event-driven networking framework that is fast and lightweight. It makes direct <a href="https://en.wikipedia.org/wiki/Epoll">epoll</a> and <a href="https://en.wikipedia.org/wiki/Kqueue">kqueue</a> syscalls rather than using the standard Go <a href="https://golang.org/pkg/net/">net</a> package and works in a similar manner as <a href="https://github.com/netty/netty">netty</a> and <a href="https://github.com/libuv/libuv">libuv</a>, which makes <code>gnet</code> achieve a much higher performance than Go <a href="https://golang.org/pkg/net/">net</a>.</p><p><code>gnet</code> is not designed to displace the standard Go <a href="https://golang.org/pkg/net/">net</a> package, but to create a networking server framework for Go that performs on par with <a href="http://redis.io">Redis</a> and <a href="http://www.haproxy.org">Haproxy</a> for networking packets handling.</p><p><code>gnet</code> sells itself as a high-performance, lightweight, non-blocking, event-driven networking framework written in pure Go which works on transport layer with TCP/UDP protocols and Unix Domain Socket , so it allows developers to implement their own protocols(HTTP, RPC, WebSocket, Redis, etc.) of application layer upon <code>gnet</code> for building  diversified network applications, for instance, you get an HTTP Server or Web Framework if you implement HTTP protocol upon <code>gnet</code> while you have a Redis Server done with the implementation of Redis protocol upon <code>gnet</code> and so on.</p><p><strong><code>gnet</code> derives from the project: <code>evio</code> while having a much higher performance and more features.</strong></p><h1><a aria-hidden="true" tabindex="-1" class="anchor" id="-features"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#-features" title="Direct link to heading">#</a>üöÄ Features</h1><ul class="contains-task-list"><li class="task-list-item"><input type="checkbox" checked="" disabled=""> <a href="https://github.com/panjf2000/gnet/blob/v1.0.0/README.md#-performance">High-performance</a> event-loop under networking model of multiple threads/goroutines</li><li class="task-list-item"><input type="checkbox" checked="" disabled=""> Built-in load balancing algorithm: Round-Robin</li><li class="task-list-item"><input type="checkbox" checked="" disabled=""> Built-in goroutine pool powered by the library <a href="https://github.com/panjf2000/ants">ants</a></li><li class="task-list-item"><input type="checkbox" checked="" disabled=""> Built-in memory pool with bytes powered by the library <a href="https://github.com/valyala/bytebufferpool">bytebufferpool</a></li><li class="task-list-item"><input type="checkbox" checked="" disabled=""> Concise APIs</li><li class="task-list-item"><input type="checkbox" checked="" disabled=""> Efficient memory usage: Ring-Buffer</li><li class="task-list-item"><input type="checkbox" checked="" disabled=""> Supporting multiple protocols/IPC mechanism: TCP, UDP and Unix Domain Socket</li><li class="task-list-item"><input type="checkbox" checked="" disabled=""> Supporting two event-driven mechanisms: epoll on Linux and kqueue on FreeBSD</li><li class="task-list-item"><input type="checkbox" checked="" disabled=""> Supporting asynchronous write operation</li><li class="task-list-item"><input type="checkbox" checked="" disabled=""> Flexible ticker event</li><li class="task-list-item"><input type="checkbox" checked="" disabled=""> SO_REUSEPORT socket option</li><li class="task-list-item"><input type="checkbox" checked="" disabled=""> Built-in multiple codecs to encode/decode network frames into/from TCP stream: LineBasedFrameCodec, DelimiterBasedFrameCodec, FixedLengthFrameCodec and LengthFieldBasedFrameCodec, referencing <a href="https://netty.io/4.1/api/io/netty/handler/codec/package-summary.html">netty codec</a>, also supporting customized codecs</li><li class="task-list-item"><input type="checkbox" checked="" disabled=""> Supporting Windows platform with <del>event-driven mechanism of IOCP</del> Go stdlib: net</li><li class="task-list-item"><input type="checkbox" disabled=""> Additional load-balancing algorithms: Random, Least-Connections, Consistent-hashing and so on</li><li class="task-list-item"><input type="checkbox" disabled=""> TLS support</li><li class="task-list-item"><input type="checkbox" disabled=""> Implementation of <code>gnet</code> Client</li></ul><h1><a aria-hidden="true" tabindex="-1" class="anchor" id="-key-designs"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#-key-designs" title="Direct link to heading">#</a>üí° Key Designs</h1><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="networking-model-of-multiple-threadsgoroutines"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#networking-model-of-multiple-threadsgoroutines" title="Direct link to heading">#</a>Networking Model of Multiple Threads/Goroutines</h2><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="multiple-reactors"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#multiple-reactors" title="Direct link to heading">#</a>Multiple Reactors</h3><p><code>gnet</code> redesigns and implements a new built-in networking model of multiple threads/goroutines: „Äémultiple reactors„Äè which is also the default networking model of multiple threads in <code>netty</code>, Here&#x27;s the schematic diagram:</p><p align="center"><img alt="multi_reactor" src="https://raw.githubusercontent.com/panjf2000/illustrations/master/go/multi-reactors.png"></p><p>and it works as the following sequence diagram:</p><p align="center"><img alt="reactor" src="https://raw.githubusercontent.com/panjf2000/illustrations/master/go/multi-reactors-sequence-diagram.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor" id="multiple-reactors--goroutine-pool"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#multiple-reactors--goroutine-pool" title="Direct link to heading">#</a>Multiple Reactors + Goroutine Pool</h3><p>You may ask me a question: what if my business logic in <code>EventHandler.React</code>  contains some blocking code which leads to blocking in event-loop of <code>gnet</code>, what is the solution for this kind of situationÔºü</p><p>As you know, there is a most important tenet when writing code under <code>gnet</code>: you should never block the event-loop goroutine in the <code>EventHandler.React</code>, which is also the most important tenet in <code>netty</code>, otherwise, it will result in a low throughput in your <code>gnet</code> server.</p><p>And the solution to that could be found in the subsequent networking model of multiple threads/goroutines in <code>gnet</code>: „Äémultiple reactors with thread/goroutine pool„Äèwhich pulls you out from the blocking mire, it will construct a worker-pool with fixed capacity and put those blocking jobs in <code>EventHandler.React</code> into the worker-pool to make the event-loop goroutines non-blocking.</p><p>The networking model:„Äémultiple reactors with thread/goroutine pool„Äèdissolves the blocking jobs by introducing a goroutine pool, as shown below:</p><p align="center"><img alt="multi_reactor_thread_pool" src="https://raw.githubusercontent.com/panjf2000/illustrations/master/go/multi-reactors%2Bthread-pool.png"></p><p>and it works as the following sequence diagram:</p><p align="center"><img alt="multi-reactors" src="https://raw.githubusercontent.com/panjf2000/illustrations/master/go/multi-reactors%2Bthread-pool-sequence-diagram.png"></p><p><code>gnet</code> implements the networking model:„Äémultiple reactors with thread/goroutine pool„Äèby the aid of a high-performance goroutine pool called <a href="https://github.com/panjf2000/ants">ants</a> that allows you to manage and recycle a massive number of goroutines in your concurrent programs, the full features and usages in <code>ants</code> are documented <a href="https://pkg.go.dev/github.com/panjf2000/ants/v2?tab=doc">here</a>.</p><p><code>gnet</code> integrates <code>ants</code> and provides the <code>pool.goroutine.Default()</code> method that you can call to instantiate a <code>ants</code> pool where you are able to put your blocking code logic and call the function <code>gnet.Conn.AsyncWrite([]byte)</code> to send out data asynchronously after you finish the blocking process and get the output data, which makes the goroutine of event-loop non-blocking.</p><p>The details about integrating <code>gnet</code>  with <code>ants</code> are shown <a href="#echo-server-with-blocking-logic">here</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor" id="reusable-and-auto-scaling-ring-buffer"></a><a aria-hidden="true" tabindex="-1" class="hash-link" href="#reusable-and-auto-scaling-ring-buffer" title="Direct link to heading">#</a>Reusable and auto-scaling Ring Buffer</h2><p>There are two ring-buffers inside <code>gnet</code>: inbound buffer and outbound buffer to buffer and manage inbound/outbound network data, ring-buffer inside gnet is designed and tuned to reuse memory and be auto-scaling on demand.</p><p>The purpose of implementing inbound and outbound ring-buffers in <code>gnet</code> is to transfer the logic of buffering and managing network data based on application protocol upon TCP stream from business server to framework and unify the network data buffer, which minimizes the complexity of business code so that developers are able to concentrate on business logic instead of the underlying implementation.</p><p align="center"><img src="https://raw.githubusercontent.com/panjf2000/illustrations/master/go/ring-buffer.gif"></p></section><section><h2>Like What You See?</h2><div class="row row--squished"><div class="col"><a href="https://twitter.com/_andy_pan" target="_blank" class="panel panel--button panel--undefined panel--undefined"><div class="panel--icon"><i class="feather icon-twitter" title="Twitter"></i></div><div><div class="panel--title">Follow @_andy_pan</div><div class="panel--description">Get real-time updates!</div></div></a></div><div class="col"><a href="https://github.com/panjf2000/gnet" target="_blank" class="panel panel--button panel--undefined panel--undefined"><div class="panel--icon"><i class="feather icon-github"></i></div><div><div class="panel--title">Star panjf2000/gnet</div><div class="panel--description">Star the repo to support us.</div></div></a></div></div></section><div class="margin-vert--xl"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/announcing-gnet-v1-cn"><div class="pagination-nav__link--sublabel">Previous Post</div><div class="pagination-nav__link--label">¬´ ÂÆòÂÆ£ gnet v1.0.0</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></article></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col col--5 footer__col"><div class="margin-bottom--md"></div><div class="margin-bottom--md"><div class="mailing-list"><form action="https://app.getvero.com/forms/a748ded7ce0da69e6042fa1e21042506" method="post" class="mailing-list--form"><input type="email" class="input input--undefined" name="email" placeholder="you@email.com" style="width:150px"><button class="button button--primary button--undefined" type="submit">Subscribe</button></form></div></div><div><a href="https://twitter.com/_andy_pan" target="_blank"><i class="feather icon-twitter" alt="gnet&#x27;s Twitter"></i></a>¬†¬†¬†¬†<a href="https://github.com/panjf2000/gnet" target="_blank"><i class="feather icon-github" alt="gnet&#x27;s Github Repo"></i></a>¬†¬†¬†¬†<a href="https://strikefreedom.top/rss.xml" target="_blank"><i class="feather icon-rss" alt="gnet&#x27;s RSS feed"></i></a></div></div><div class="col footer__col"><h4 class="footer__title">About</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/about/overview/">What is gnet?</a></li><li class="footer__item"><a class="footer__link-item" href="/community/#team">The Team</a></li><li class="footer__item"><a class="footer__link-item" href="/contact/">Contact Me</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" to="https://gitter.im/gnet-io/gnet" href="https://gitter.im/gnet-io/gnet">Chat</a></li><li class="footer__item"><a class="footer__link-item" to="https://github.com/panjf2000/gnet" href="https://github.com/panjf2000/gnet">Github</a></li><li class="footer__item"><a class="footer__link-item" to="https://github.com/gnet-io" href="https://github.com/gnet-io">Github Organization</a></li><li class="footer__item"><a class="footer__link-item" to="https://twitter.com/_andy_pan" href="https://twitter.com/_andy_pan">Twitter</a></li><li class="footer__item"><a class="footer__link-item" href="/blog/">Blog</a></li></ul></div></div><div class="text--center"><div class="margin-bottom--sm"><a href="https://github.com/panjf2000/gnet/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_3L_r"></a><br><a href="https://www.digitalocean.com/" target="_blank" rel="noopener noreferrer" class="footerLogoLink_3L_r"><img alt="DigitalOcean" src="https://opensource.nyc3.cdn.digitaloceanspaces.com/attribution/assets/PoweredByDO/DO_Powered_by_Badge_blue.svg" width="201px"></a></div>Copyright ¬© 2022 Andy Pan<br><small><a href="https://github.com/panjf2000/gnet/security/policy">Security Policy</a>¬†‚Ä¢¬†<a href="https://github.com/panjf2000/gnet/blob/master/PRIVACY.md">Privacy Policy</a></small><br><small>Acknowledgement for Timber, Inc.</small></div></div></footer>
</div>

<script src="/styles.6d9afda7.js"></script>

<script src="/runtime~main.28a1d406.js"></script>

<script src="/main.f3aa464a.js"></script>

<script src="/1.55ea5b9e.js"></script>

<script src="/2.3a298c7e.js"></script>

<script src="/3.428725dd.js"></script>

<script src="/ccc49370.fb94a70a.js"></script>

<script src="/69432dc9.a0c2d53c.js"></script>


</body>
</html>